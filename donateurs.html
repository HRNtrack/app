<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HRNtrack</title>
    <link rel="icon" type="image/vnd.icon" href="https://i.postimg.cc/Jndw3xZn/IMG-0226f.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* PALETTE */
            --primary: #6A8C47;
            --primary-dark: #557235;
            --bg-body: #F5F5F0;
            --card-bg: #ffffff;
            --text-main: #1A1A1A;
            --text-sub: #555555;
            --gold: #C6A875;
            --gold-light: #F0EAD6;
            --red: #C0392B;
            --dark-bg: #1A1A1A;
            
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --nav-height-mobile: 80px;
        }

        body { 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            font-family: 'Poppins', sans-serif; 
            margin: 0; 
            display: flex; flex-direction: column; min-height: 100vh;
            padding-bottom: var(--nav-height-mobile); /* Espace pour la nav mobile */
        }

        /* --- HEADER & NAV --- */
        .top-nav {
            background: var(--dark-bg); color: white; padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .site-logo { height: 80px; }

        .nav-center {
            position: absolute; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.05); padding: 4px;
            border-radius: 12px; display: flex; gap: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 2000;
        }

        .nav-link {
            text-decoration: none; color: #9CA3AF; padding: 6px 16px;
            border-radius: 8px; font-size: 12px; font-weight: 600;
            transition: all 0.3s ease; display: flex; align-items: center; gap: 6px;
        }
        .nav-link:hover { color: white; background: rgba(255, 255, 255, 0.05); }
        .nav-link.active { background: var(--primary); color: white; box-shadow: 0 2px 10px rgba(106, 140, 71, 0.4); }

        .nav-right { display: flex; align-items: center; gap: 10px; }

        .lang-toggle {
            display: flex; background: rgba(255,255,255,0.1); border-radius: 20px;
            padding: 2px; cursor: pointer; border: 1px solid rgba(255,255,255,0.2);
        }
        .lang-option {
            padding: 6px 12px; border-radius: 16px; font-size: 11px; font-weight: 700;
            color: #9CA3AF; transition: all 0.3s ease;
        }
        .lang-option.active { background: var(--primary); color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        /* BOUTON AUTH / SUPPORT */
        .btn-auth-trigger {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; 
            padding: 8px 16px; border-radius: 10px; cursor: pointer; font-size: 13px; font-weight: 600; 
            transition: 0.2s; display: flex; align-items: center; gap: 8px; text-decoration: none;
        }
        .btn-auth-trigger:hover { background: rgba(255,255,255,0.2); }
        .btn-auth-trigger.logged-in { background: rgba(106, 140, 71, 0.2); border-color: var(--primary); color: var(--primary); }

        /* --- MOBILE OPTIMIZATION (APP BAR STYLE) --- */
        @media (min-width: 769px) {
            body { padding-bottom: 0; }
        }

        @media (max-width: 768px) {
            .site-logo { display: none; } 
            
            /* Le Header du haut ne garde que les boutons de droite */
            .top-nav {
                justify-content: flex-end; 
                padding: 10px 15px;
            }

            /* La barre de navigation devient une App Bar en bas */
            .nav-center {
                position: fixed; 
                bottom: 0; 
                top: auto; 
                left: 0; 
                transform: none; 
                width: 100%;
                background: #1A1A1A; 
                border-radius: 0;
                border: none;
                border-top: 1px solid rgba(255,255,255,0.1);
                padding: 8px 0 25px 0; 
                justify-content: space-around; 
                box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
                box-sizing: border-box;
                z-index: 2000;
            }

            /* Style des liens en mode Mobile */
            .nav-link {
                flex-direction: column; 
                padding: 0;
                gap: 4px;
                background: transparent !important; 
                box-shadow: none !important;
                color: #6B7280; 
            }

            .nav-link span:first-child { font-size: 20px; }
            .nav-link span:last-child { font-size: 10px; font-weight: 500; display: block; }

            .nav-link.active { color: var(--primary); }
            .nav-link:hover { background: transparent; color: white; }
        }

        /* --- CONTAINER & DONATIONS --- */
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; width: 100%; box-sizing: border-box; flex: 1; }
        
        .goal-card { background: white; padding: 40px; border-radius: 20px; box-shadow: var(--shadow); text-align: center; margin-bottom: 40px; position: relative; overflow: hidden; }
        .goal-title { font-size: 14px; color: var(--text-sub); text-transform: uppercase; letter-spacing: 2px; font-weight: 700; margin-bottom: 10px; }
        .goal-amount { font-size: 48px; font-weight: 800; color: var(--primary); margin: 0; }
        
        .progress-container { height: 24px; background: #E5E7EB; border-radius: 12px; overflow: hidden; margin: 20px auto; max-width: 600px; position: relative; }
        /* Gradient Vert Nature */
        .progress-bar { height: 100%; background: linear-gradient(90deg, var(--primary), #8FBC6B); width: 0%; transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 12px; box-shadow: 0 0 15px rgba(106, 140, 71, 0.4); }
        .progress-text { position: absolute; width: 100%; text-align: center; top: 0; line-height: 24px; font-size: 11px; font-weight: 800; color: #1F2937; z-index: 2; mix-blend-mode: overlay; }

        .donors-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .donor-card { background: white; padding: 15px; border-radius: 12px; box-shadow: var(--shadow); display: flex; align-items: center; justify-content: space-between; border-left: 4px solid var(--primary); }
        .donor-name { font-weight: 600; font-size: 14px; }
        .donor-amount { font-weight: 700; color: var(--primary); font-size: 16px; background: rgba(106, 140, 71, 0.15); padding: 4px 8px; border-radius: 6px; }

        #admin-panel { display: none; background: var(--dark-bg); padding: 20px; border-radius: 15px; margin-bottom: 30px; color: white; }
        .admin-row { display: flex; gap: 10px; margin-top: 10px; }
        .admin-input { flex: 1; padding: 10px; border-radius: 6px; border: none; } /* Pour l'admin panel */
        .btn-add { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; }
        .btn-add:hover { background: var(--primary-dark); }

        /* MODALS & INPUTS (STYLE HARMONIS√â) */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 90%; max-width: 420px; padding: 25px; border-radius: 20px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); max-height: 90vh; overflow-y: auto; position: relative; }
        
        /* STYLE INPUTS IDENTIQUE A LA COLLECTION */
        input, select, textarea {
            width: 100%; padding: 12px; border: 1px solid #E5E7EB;
            border-radius: 10px; font-family: inherit; font-size: 14px;
            box-sizing: border-box; transition: 0.3s;
        }
        input:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(106, 140, 71, 0.1); }

        .btn-save { width: 100%; background: var(--dark-bg); color: white; border: none; padding: 14px; border-radius: 10px; font-weight: 600; cursor: pointer; margin-top: 10px; transition: 0.2s; }
        .btn-save:hover { background: var(--primary); }
        .btn-cancel { width: 100%; background: transparent; border: none; color: var(--red); padding: 10px; cursor: pointer; margin-top: 5px; font-size: 12px; font-weight: 600; }
        .btn-cancel:hover { text-decoration: underline; }

        .auth-title { text-align: center; font-size: 24px; font-weight: 800; margin-bottom: 20px; color: var(--text-main); }
        .auth-separator { display: flex; align-items: center; margin: 20px 0; color: #9CA3AF; font-size: 12px; }
        .auth-separator::before, .auth-separator::after { content: ""; flex: 1; height: 1px; background: #E5E7EB; margin: 0 10px; }
        
        /* FOOTER */
        .site-footer { background-color: var(--dark-bg); color: #9CA3AF; padding: 60px 20px 20px; margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1); font-size: 13px; }
        .footer-content { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .footer-col h4 { color: white; margin: 0 0 15px 0; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; }
        .footer-links { list-style: none; padding: 0; }
        .footer-links li { margin-bottom: 8px; }
        .footer-links a { color: #9CA3AF; text-decoration: none; transition: color 0.2s; }
        .footer-links a:hover { color: var(--primary); }
        .footer-bottom { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 11px; color: #6B7280; }

        /* --- STYLES BOUTON KO-FI CUSTOM --- */
        .btn-kofi-custom {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            background-color: #6a8c47; 
            background: linear-gradient(45deg, #6a8c47, #3e522a);
            color: white; text-decoration: none;
            padding: 12px 25px; border-radius: 50px;
            font-weight: 700; font-size: 14px;
            box-shadow: 0 4px 15px #2f3e20;
            transition: all 0.3s ease;
            margin: 20px auto 0;
            max-width: 250px;
            border: 2px solid transparent;
        }

        .btn-kofi-custom:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px rgba(41, 171, 224, 0.6);
        }

        .kofi-icon { font-size: 18px; animation: kofi-wiggle 3s infinite; }

        @keyframes kofi-wiggle {
            0%, 100% { transform: rotate(0) scale(1); }
            5% { transform: rotate(-10deg) scale(1.1); }
            10% { transform: rotate(10deg) scale(1.1); }
            15% { transform: rotate(-10deg) scale(1.1); }
            20% { transform: rotate(0) scale(1); }
        }
        #snow-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Tr√®s important : permet de cliquer "√† travers" la neige */
    z-index: 9999; /* Par-dessus tout le reste */
}
    </style>
</head>
<body>
<canvas id="snow-canvas"></canvas>
    <nav class="top-nav">
        <div style="display:flex; align-items:center; gap:10px;">
            <a href="index.html">
                <img src="https://i.postimg.cc/yNdVZYsy/logo1-blanc.png" class="site-logo" alt="Logo">
            </a>
        </div>
        <div class="nav-center">
            <a href="index.html" class="nav-link"><span>üè†</span> <span data-t="navHome">Accueil</span></a>
            <a href="dashboard.html" class="nav-link"><span>üìã</span> <span data-t="navCollection">Collection</span></a>
            <a href="statistiques.html" class="nav-link"><span>üìä</span> <span data-t="navStats">Stats</span></a>
            <a href="donateurs.html" class="nav-link active"><span>üéÅ</span> <span data-t="navDonors">Dons</span></a>
            <a href="contact.html" class="nav-link"><span>‚úâÔ∏è</span> <span data-t="navContact">Contact</span></a>
        </div>
        <div class="nav-right">
             <a href="https://ko-fi.com/hrntrack" target="_blank" class="btn-auth-trigger" style="margin-right:10px; text-decoration:none;">
                <span>‚òï</span> <span data-t="navSupport">Soutenir</span>
            </a>

            <div class="lang-toggle" onclick="window.toggleLanguage()">
                <div class="lang-option active" id="lang-fr">FR</div>
                <div class="lang-option" id="lang-en">EN</div>
            </div>
            <button id="auth-trigger" class="btn-auth-trigger" onclick="window.toggleAuthModal()">
                <span>üêº</span> <span id="auth-status-text" data-t="authLogin">Connexion</span>
            </button>
        </div>
    </nav>

    <div class="container">
        <div id="admin-panel">
            <h3 style="margin:0 0 10px 0;">üëë Ajouter un donateur</h3>
            <div class="admin-row">
                <input type="text" id="new-name" class="admin-input" placeholder="Nom">
                <input type="number" id="new-amount" class="admin-input" placeholder="‚Ç¨">
                <button class="btn-add" onclick="window.addDonation()">Ajouter</button>
            </div>
        </div>

        <div class="goal-card">
            <div class="goal-title" data-t="lblGoalTitle">Objectif du moment</div>
            <h1 class="goal-amount" id="total-raised">0‚Ç¨</h1>
            <div style="color:var(--text-sub);"><span data-t="lblGoalTarget">sur</span> <span id="goal-target-text">0‚Ç¨</span></div>
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
                <div id="progress-percent" class="progress-text">0%</div>
            </div>
            <p style="font-size:12px; color:#9CA3AF;"><span data-t="lblGoalDesc">Merci de votre soutien ! ‚ù§Ô∏è</span></p>

            <a href="https://ko-fi.com/U7U11QWR1G" target="_blank" class="btn-kofi-custom">
                <span class="kofi-icon">‚òï</span>
                <span data-t="btnKofi">Support me on Ko-fi</span>
            </a>
        </div>

        <h2 style="font-size:18px; border-bottom:2px solid #E5E7EB; padding-bottom:10px; margin-bottom:20px;">
            ‚ú® <span data-t="lblWall">Mur des Donateurs</span>
        </h2>
        <div id="donors-list" class="donors-grid"></div>
    </div>

    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content" style="text-align:center;">
            <div class="auth-title" data-t="authLogin">Connexion</div>
            <p style="color:#6B7280; font-size:13px; margin-bottom:20px;" data-t="authDesc">
                Sauvegardez votre collection dans le cloud.
            </p>
            
            <input type="email" id="auth-email" placeholder="Email" style="margin-bottom:10px;">
            <input type="password" id="auth-pass" placeholder="Mot de passe" style="margin-bottom:20px;">
            
            <button class="btn-save" onclick="window.handleLogin()" style="background:var(--primary);" data-t="btnLogin">Se connecter</button>
            
            <div class="auth-separator">OU</div>
            
            <button class="btn-save" onclick="window.handleRegister()" style="background:white; color:var(--text-main); border:1px solid #E5E7EB;" data-t="btnRegister">
                Cr√©er un compte
            </button>
            
            <button class="btn-cancel" onclick="window.toggleAuthModal()" data-t="btnCancel">Annuler</button>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-col">
                <img src="https://i.postimg.cc/yNdVZYsy/logo1-blanc.png" alt="HRNtrack" style="height: 100px; margin-bottom: 15px; opacity: 0.8;">
                <p data-t="footerDesc">L'outil ultime pour suivre votre collection Hirono.</p>
            </div>
            <div class="footer-col">
                <h4 data-t="footerNav">Navigation</h4>
                <ul class="footer-links">
                    <li><a href="index.html" data-t="navHome">Accueil</a></li>
                    <li><a href="dashboard.html" data-t="navCollection">Collection</a></li>
                    <li><a href="statistiques.html" data-t="navStats">Statistiques</a></li>
                    <li><a href="donateurs.html" data-t="navDonors">Donateurs</a></li>
                    <li><a href="contact.html" data-t="navContact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4 data-t="footerAbout">√Ä propos</h4>
                <p data-t="footerDisclaimer">Ce site est un projet de fan (Fanmade).<br>Nous ne sommes pas affili√©s √† <strong>POP MART</strong>.</p>
            </div>
        </div>
        <div class="footer-bottom">&copy; 2025 HRNtrack. Fait avec passion.</div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, Timestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyB1vHxCeB4IfNWpTibp64WgNP30KlXMaAc", authDomain: "hrntrack-1cfe3.firebaseapp.com", projectId: "hrntrack-1cfe3", storageBucket: "hrntrack-1cfe3.firebasestorage.app", messagingSenderId: "1059019333826", appId: "1:1059019333826:web:fa184b796b847cc0f2db5b" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        const GOAL_AMOUNT = 100;
        const ADMIN_EMAIL = "hironotrack@gmail.com"; 

        const translations = {
            fr: { 
                navHome: "Accueil", navCollection: "Collection", navStats: "Stats", navDonors: "Dons", navContact: "Contact", navSupport: "Soutenir",
                authLogin: "Connexion", authAccount: "Mon Compte", authDesc: "Sauvegardez votre collection dans le cloud.",
                btnLogin: "Se connecter", btnRegister: "Cr√©er un compte", btnCancel: "Annuler", 
                footerDesc: "L'outil ultime pour suivre votre collection Hirono.", footerNav: "Navigation", footerAbout: "√Ä propos", footerDisclaimer: "Ce site est un projet de fan (Fanmade). Nous ne sommes pas affili√©s √† POP MART.", 
                lblGoalTitle: "Objectif du moment", lblGoalTarget: "sur", lblGoalDesc: "Merci de votre soutien ! ‚ù§Ô∏è", lblWall: "Mur des Donateurs",
                btnKofi: "Soutenez-moi sur Ko-fi" 
            },
            en: { 
                navHome: "Home", navCollection: "Collection", navStats: "Stats", navDonors: "Donors", navContact: "Contact", navSupport: "Support",
                authLogin: "Login", authAccount: "My Account", authDesc: "Save your collection to the cloud.",
                btnLogin: "Log In", btnRegister: "Sign Up", btnCancel: "Cancel", 
                footerDesc: "The ultimate tool to track your Hirono collection.", footerNav: "Navigation", footerAbout: "About", footerDisclaimer: "This is a fanmade project. We are not affiliated with POP MART.", 
                lblGoalTitle: "Current Goal", lblGoalTarget: "of", lblGoalDesc: "Thanks for your support! ‚ù§Ô∏è", lblWall: "Wall of Donors",
                btnKofi: "Support me on Ko-fi"
            }
        };

        let currentLang = localStorage.getItem('HRN_LANG') || 'fr';
        window.toggleLanguage = () => { currentLang = (currentLang === 'fr') ? 'en' : 'fr'; localStorage.setItem('HRN_LANG', currentLang); updateUIText(); loadDonations(); };

        function updateUIText() {
            const t = translations[currentLang];
            document.querySelectorAll('[data-t]').forEach(el => { const key = el.getAttribute('data-t'); if(t[key]) el.innerText = t[key]; });
            document.getElementById('lang-fr').className = currentLang === 'fr' ? 'lang-option active' : 'lang-option';
            document.getElementById('lang-en').className = currentLang === 'en' ? 'lang-option active' : 'lang-option';
            const user = auth.currentUser;
            const btnText = document.getElementById('auth-status-text');
            if(btnText) btnText.innerText = user ? t.authAccount : t.authLogin;
        }

        window.toggleAuthModal = () => { const el = document.getElementById('auth-modal'); el.style.display = (el.style.display === 'flex') ? 'none' : 'flex'; };
        
        // --- MODAL CLICK OUTSIDE ---
        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.style.display = "none";
            }
        }

        window.handleLogin = async () => { 
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;
            if(!email || !pass) return alert("Veuillez remplir les champs.");
            
            try { 
                await signInWithEmailAndPassword(auth, email, pass); 
                window.toggleAuthModal(); 
            } catch(e) { 
                alert("Erreur: " + e.message); 
            } 
        };

        window.handleRegister = async () => {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;
            if(!email || !pass) return alert("Veuillez remplir les champs.");
            try {
                await createUserWithEmailAndPassword(auth, email, pass);
                window.toggleAuthModal();
            } catch(e) { alert("Erreur: " + e.message); }
        };
        
        window.handleLogout = async () => { if(confirm("D√©connexion ?")) { await signOut(auth); location.reload(); } };

        async function loadDonations() {
            const t = translations[currentLang];
            const q = query(collection(db, "donations"), orderBy("date", "desc"));
            const snapshot = await getDocs(q);
            let total = 0, html = "";
            snapshot.forEach(doc => {
                const data = doc.data(); total += parseFloat(data.amount);
                html += `<div class="donor-card"><span class="donor-name">${data.name}</span><span class="donor-amount">${data.amount}‚Ç¨</span></div>`;
            });
            document.getElementById('donors-list').innerHTML = html || `<p style='color:gray'>${t.lblWall}...</p>`;
            document.getElementById('total-raised').innerText = total.toFixed(2) + "‚Ç¨";
            document.getElementById('goal-target-text').innerText = GOAL_AMOUNT + "‚Ç¨";
            let percent = Math.min((total / GOAL_AMOUNT) * 100, 100);
            document.getElementById('progress-bar').style.width = percent + "%";
            document.getElementById('progress-percent').innerText = Math.round(percent) + "%";
        }

        onAuthStateChanged(auth, (user) => {
            updateUIText();
            const btn = document.getElementById('auth-trigger');
            if (user) {
                btn.classList.add('logged-in'); 
                // MODIFICATION ICI : REDIRECTION VERS COMPTE.HTML
                btn.onclick = () => window.location.href = "compte.html";
                
                if(user.email === ADMIN_EMAIL) document.getElementById('admin-panel').style.display = 'block';
            } else {
                btn.classList.remove('logged-in'); 
                btn.onclick = () => window.toggleAuthModal();
            }
        });

        window.addDonation = async () => {
            const n = document.getElementById('new-name').value, a = document.getElementById('new-amount').value;
            if(!n || !a) return;
            await addDoc(collection(db, "donations"), { name: n, amount: parseFloat(a), date: Timestamp.now() });
            location.reload();
        };

        loadDonations();

        const canvas = document.getElementById('snow-canvas');
const ctx = canvas.getContext('2d');

let width, height, snowflakes;

function initSnow() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    snowflakes = [];
    // Ajuste le nombre de flocons ici (150 est un bon √©quilibre)
    for (let i = 0; i < 150; i++) {
        snowflakes.push({
            x: Math.random() * width,
            y: Math.random() * height,
            radius: Math.random() * 3 + 1,
            speed: Math.random() * 1 + 0.5,
            wind: Math.random() * 0.5 - 0.25,
            opacity: Math.random() * 0.5 + 0.3
        });
    }
}

function drawSnow() {
    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = "white";
    
    snowflakes.forEach(flake => {
        ctx.beginPath();
        ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2);
        ctx.globalAlpha = flake.opacity;
        ctx.fill();

        // D√©placement
        flake.y += flake.speed;
        flake.x += flake.wind;

        // Si le flocon sort en bas, il r√©appara√Æt en haut
        if (flake.y > height) {
            flake.y = -10;
            flake.x = Math.random() * width;
        }
    });

    requestAnimationFrame(drawSnow);
}

window.addEventListener('resize', initSnow);

// Lancement
initSnow();
drawSnow();
    </script>
</body>
</html>